% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit.R
\name{sim_tam}
\alias{sim_tam}
\title{Simulation using a fitted TAM}
\usage{
sim_tam(fit, obs_only = FALSE)
}
\arguments{
\item{fit}{A fitted TAM object returned by \code{\link[=fit_tam]{fit_tam()}}.}

\item{obs_only}{Logical; if \code{TRUE}, only new \code{log_obs} values are
simulated and inserted into the final report.
If \code{FALSE} (default), simulated random effects are also injected and all REPORTed quantities are recomputed.}
}
\value{
A list of REPORTed objects (same structure as \code{fit$rep}) with
\code{log_obs} replaced by simulated values.
If \code{obs_only = FALSE}, the report also reflects simulated random effects.
}
\description{
Simulates random effects and observations from a fitted model by calling the
likelihood with \code{simulate = TRUE}, then regenerates the REPORTed
quantities. Simulation is performed purely in R (not via RTMB \code{simref}).
}
\details{
Simulate from a fitted TAM

The function:
\enumerate{
\item Extracts MLEs as a parameter list: \code{as.list(fit$sdrep, "Estimate")}.
\item Calls \code{nll_fun(p, simulate = TRUE)} to draw new random effects
and \code{log_obs}.
\item If \code{obs_only = FALSE} (default), injects the simulated random
effects back into \code{p} (\code{p[obj$env$.random]}), calls
\code{nll_fun} again (to update any derived quantities), and runs
\code{obj$report(unlist(p))}.
\item Returns the REPORT list with \code{log_obs} replaced by the simulated
values; if \code{obs_only = FALSE}, all derived objects reflect the
simulated random effects.
}
}
\examples{
fit <- fit_tam(cod_obs, years = 1983:2024, ages = 2:14)
rep_sim <- sim_tam(fit, obs_only = FALSE)
str(rep_sim$log_obs)

}
\seealso{
\code{\link[=fit_tam]{fit_tam()}}, \code{\link[=fit_retro]{fit_retro()}}
}
