% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tidy.R
\name{tidy_tam}
\alias{tidy_tam}
\title{Stack TAM outputs across models (retro folds, scenarios, etc.)}
\usage{
tidy_tam(..., model_list = NULL, interval = 0.95, label = "model")
}
\arguments{
\item{...}{One or more fitted TAM objects (as returned by \code{\link[=fit_tam]{fit_tam()}}).
Ignored if \code{model_list} is provided.}

\item{model_list}{A \strong{named list} of fitted TAM objects. Required to be named;
the names are used as label values (even for length-1 lists).}

\item{interval}{Confidence level passed to \code{\link[=tidy_pop]{tidy_pop()}} for interval construction.
Default \code{0.95}.}

\item{label}{Character scalar giving the label column name to add when stacking
across multiple/named models. Default \code{"model"}.}
}
\value{
A named list with two elements:
\itemize{
\item \strong{obs_pred} — a named list of stacked data frames (e.g., \code{catch}, \code{index});
\item \strong{pop} — a named list of stacked data frames (e.g., \code{ssb}, \code{N}, \code{M},
\code{mu_M}, \code{F}, \code{mu_F}, \code{Z}, \code{ssb_mat}).
}

Each stacked data frame contains all rows across models, with a label column
added according to the rules above.
}
\description{
Builds tidy, stacked tables from one or more fitted TAM models. For each
model, it collects:
\itemize{
\item observation diagnostics via \code{\link[=tidy_obs_pred]{tidy_obs_pred()}}, and
\item population summaries via \code{\link[=tidy_pop]{tidy_pop()}} (with confidence intervals),
}

then stacks \strong{per component} across models (e.g., all \code{"catch"} tables
together; all \code{"N"} tables together).
}
\details{
\strong{Inputs:} Pass models through \code{...} or via \verb{model_list =}.
\itemize{
\item If \code{...} supplies \strong{one} model, \strong{no label} column is added.
\item If \code{...} supplies \strong{more than one} model, a label column is added using
the object/expression names from \code{...}.
\item If \code{model_list} is used, it \strong{must be a named list}; its names are always
used as labels (even when length 1).
}

Only components present in \strong{all} models are stacked (intersection of
component names), ensuring consistent columns for base-R \code{rbind()}.
}
\examples{
# Single model via ...: no label column added
fit1 <- fit_tam(northern_cod_data, years = 1983:2024, ages = 2:14)
tabs1 <- tidy_tam(fit1)
head(tabs1$obs_pred$index)

# Multiple via ...: label uses the object names
fit2 <- update(fit1, years = 1983:2023)
tabs2 <- tidy_tam(fit1, fit2)
head(tabs2$obs_pred$catch)  # contains column "model"

# Named list: must be named; names always used as label (even length 1)
fits <- list(`2023` = fit2, `2024` = fit1)
tabs3 <- tidy_tam(model_list = fits, label = "retro_year")
head(tabs3$pop$N)  # column "retro_year" has 2023/2024

}
\seealso{
\code{\link[=tidy_obs_pred]{tidy_obs_pred()}}, \code{\link[=tidy_pop]{tidy_pop()}}, \code{\link[=fit_tam]{fit_tam()}}, \code{\link[=fit_retro]{fit_retro()}}
}
