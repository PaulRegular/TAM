% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit.R
\name{fit_tam}
\alias{fit_tam}
\title{Fit TAM}
\usage{
fit_tam(inputs, ...)
}
\arguments{
\item{inputs}{A named list of tidy observation tables as expected by
\code{\link[=make_obs]{make_obs()}} / \code{\link[=make_dat]{make_dat()}} (e.g., \code{catch}, \code{index},
\code{weight}, \code{maturity}).}

\item{...}{Arguments forwarded to \code{\link[=make_dat]{make_dat()}} (e.g., \code{years},
\code{ages}, \code{N_settings}, \code{F_settings}, \code{M_settings},
\code{obs_settings}).}
}
\value{
A list with components:
\describe{
\item{call}{Matched call.}
\item{dat}{Data list returned by \code{\link[=make_dat]{make_dat()}}.}
\item{obj}{RTMB ADFun object.}
\item{opt}{\code{nlminb} optimization result.}
\item{rep}{List from \code{obj$report()}.}
\item{sdrep}{\code{RTMB::sdreport} result.}
}
}
\description{
Builds data with \code{\link[=make_dat]{make_dat()}}, initializes parameters with \code{\link[=make_par]{make_par()}},
constructs the RTMB objective, optimizes it, and returns a fitted object with
reports and standard errors.
}
\details{
Fit a Tiny Assessment Model (TAM)

This function assigns the constructed data list to a global (\code{dat <<- ...})
to satisfy closures inside the likelihood (\code{nll_fun}). Random-effect blocks
are chosen automatically from the model settings:
\itemize{
\item Always includes \code{log_f} and \code{log_r}.
\item Includes \code{missing} if there are missing observations.
\item Includes \code{log_n} if \code{N_settings$process != "off"}.
\item Includes \code{log_m} if \code{M_settings$process != "off"}.
}
A warning is issued if the number of random effects is more than twice the
number of observed data points (rough identifiability check).
}
\examples{

fit <- fit_tam(
  northern_cod_data,
  years = 1983:2024, ages = 2:14,
  N_settings = list(process = "iid", init_N0 = FALSE),
  F_settings = list(process = "rw"),
  M_settings = list(process = "off", assumption = ~I(0.3)),
  obs_settings = list(sd_form = ~ sd_obs_block, q_form = ~ q_block)
)
fit$sdrep

}
\seealso{
\code{\link[=make_dat]{make_dat()}}, \code{\link[=make_par]{make_par()}}, \code{\link[=sim_tam]{sim_tam()}}, \code{\link[=fit_retro]{fit_retro()}},
RTMB::MakeADFun(), RTMB::sdreport()
}
