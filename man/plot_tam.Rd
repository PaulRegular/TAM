% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.R
\name{plot_tam}
\alias{plot_tam}
\alias{plot_trend}
\alias{plot_heatmap}
\alias{plot_obs_pred}
\alias{plot_bubbles}
\alias{plot_resid}
\title{Plot utilities for \code{tidy_tam()} outputs}
\usage{
plot_trend(
  data,
  ylab = "",
  title = "",
  add_intervals = TRUE,
  add_buttons = TRUE,
  ...
)

plot_heatmap(data, zlab = "Estimate", title = "", ...)

plot_obs_pred(data, ylab = "", title = "", add_buttons = TRUE, ...)

plot_bubbles(data, ...)

plot_resid(data, x = ~year, xlab = "Year", ...)
}
\arguments{
\item{data}{A data frame containing at least \code{year} and \code{est} columns.}

\item{ylab}{Label for the y-axis.}

\item{title}{Plot title.}

\item{add_intervals}{Logical; if \code{TRUE}, show confidence intervals when \code{lwr} and \code{upr} are present.}

\item{add_buttons}{Logical; if \code{TRUE}, include buttons to toggle y-axis between linear/log.}

\item{...}{Additional arguments to pass to \code{\link[plotly:plot_ly]{plotly::plot_ly()}} such as \code{color}, \code{colors}, etc.}

\item{zlab}{Label for the colorbar in heatmaps.}

\item{x, xlab}{For residual plots, specify the x variable and its label.}
}
\value{
A Plotly object.
}
\description{
These functions provide minimal, Plotly-based visualizations for outputs
from \code{\link[=tidy_tam]{tidy_tam()}} and related TAM model objects:
}
\details{
\itemize{
\item \code{\link[=plot_trend]{plot_trend()}}: time‐series trends with optional confidence ribbons.
\item \code{\link[=plot_surface]{plot_surface()}}: age × year heatmaps for matrix quantities (e.g., \code{F}, \code{M}, \code{N}).
\item \code{\link[=plot_obs_pred]{plot_obs_pred()}}: observed vs predicted fits by year.
\item \code{\link[=plot_bubbles]{plot_bubbles()}}: residuals (OSA or standardized) as bubbles by age × year.
\item \code{\link[=plot_resid]{plot_resid()}}: residual diagnostics vs year, cohort, age, and expected values.
}
}
\examples{
## Fit two models
N_dev <- fit_tam(
  cod_obs, years = 1983:2024, ages = 2:14,
  N_settings = list(process = "iid", init_N0 = FALSE),
  M_settings = list(process = "off", assumption = ~ I(0.3))
)
M_dev <- update(
  N_dev,
  N_settings = list(process = "off", init_N0 = TRUE),
  M_settings = list(process = "ar1", assumption = ~ I(0.3),
                    age_breaks = seq(2, 14, by = 6))
)
tabs <- tidy_tam(N_dev, M_dev)

## Trend plots
plot_trend(N_dev$pop$biomass, ylab = "Biomass")
plot_trend(tabs$pop$biomass, color = ~model, ylab = "Biomass")

N_dev$pop$N |>
  dplyr::mutate(age = factor(age, levels = sort(unique(age)))) |>
  plot_trend(ylab = "N", color = ~age, colors = viridis::viridis(14))

## Age-Year Heatmap
plot_heatmap(N_dev$pop$F, zlab = "F")
plot_heatmap(M_dev$pop$F, zlab = "F")

## Observed vs Predicted
plot_obs_pred(N_dev$obs_pred$catch, frame = ~age, ylab = "Catch")
plot_obs_pred(tabs$obs_pred$index,
              color = ~model, legendgroup = ~model,
              frame = ~age, ylab = "Index")

## Residual Bubbles
plot_bubbles(N_dev$obs_pred$catch)
plot_bubbles(tabs$obs_pred$index, frame = ~model)

## Residual Scatter
plot_resid(N_dev$obs_pred$catch, x = ~age, xlab = "Age")
plot_resid(tabs$obs_pred$index, frame = ~model,
            x = ~year, xlab = "Year", showlegend = FALSE)

}
